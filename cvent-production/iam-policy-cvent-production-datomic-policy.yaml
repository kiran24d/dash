---
AWSTemplateFormatVersion: 2010-09-09
Description: Create a custom managed policy for datomic user.

Resources:
  CventProductionDatomicPolicy:
    Type: AWS::IAM::ManagedPolicy
    Properties:
      ManagedPolicyName: cvent-production-datomic-policy
      PolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Action:
              - dynamodb:BatchGetItem
              - dynamodb:BatchWriteItem
              - dynamodb:ConditionCheck
              - dynamodb:CreateBackup
              - dynamodb:CreateGlobalTable
              - dynamodb:CreateTable
              - dynamodb:DeleteBackup
              - dynamodb:DeleteItem
              - dynamodb:DeleteTable
              - dynamodb:DescribeBackup
              - dynamodb:DescribeContinuousBackups
              - dynamodb:DescribeGlobalTable
              - dynamodb:DescribeGlobalTableSettings
              - dynamodb:DescribeTable
              - dynamodb:GetItem
              - dynamodb:GetRecords
              - dynamodb:ListBackups
              - dynamodb:ListGlobalTables
              - dynamodb:ListTables
              - dynamodb:PutItem
              - dynamodb:Query
              - dynamodb:RestoreTableFromBackup
              - dynamodb:RestoreTableToPointInTime
              - dynamodb:Scan
              - dynamodb:UpdateContinuousBackups
              - dynamodb:UpdateGlobalTable
              - dynamodb:UpdateGlobalTableSettings
              - dynamodb:UpdateItem
              - dynamodb:UpdateTable
            Resource:
              - arn:aws:dynamodb:*:659687181524:table/attendee-journey-ephemera-P2
              - arn:aws:dynamodb:*:659687181524:table/attendee-journey-kenoma-P2
              - arn:aws:dynamodb:*:659687181524:table/cvent-production-attendee-journey-ephemera-production-us-east-1
              - arn:aws:dynamodb:*:659687181524:table/cvent-production-attendee-journey-kenoma-production-us-east-1
              - arn:aws:dynamodb:*:659687181524:table/cvent-production-attendee-journey-pleroma-production-us-east-1